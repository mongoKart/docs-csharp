.. _csharp-mongo-client-settings:

================================
Configure the Connection in Code 
================================

You can use a ``MongoClientSettings`` object to configure connection settings in code
rather than in a connection URI. Configuring the connection this way makes it easier to 
change settings at runtime, helps you catch errors during compilation, and provides 
more configuration options than the connection URI.

To use a ``MongoClientSettings`` object, create an instance of the class and pass it as
an argument to the ``MongoClient`` constructor:

.. literalinclude:: /includes/fundamentals/code-examples/MongoClientSettings.cs
   :language: csharp
   :dedent:

MongoClientSettings Options
---------------------------

This section describes the configuration options exposed as properties of the 
``MongoClientSettings`` class. To use these options, set the properties on your 
``MongoClientSettings`` object before you pass it to the ``MongoClient`` constructor.

.. list-table::
   :header-rows: 1
   :widths: 1 1 1

   * - Property
     - Default Value
     - Description

   * - **AllowInsecureTls**
     - ``false``
     - {+allow-insecure-tls+}

   * - **ApplicationName**
     - ``null``
     - {+app-name+}

   * - **AutoEncryptionOptions**
     - ``null``
     - Settings for automatic client-side encryption.

   * - **ClusterConfigurator**
     - ``null``
     - Low-level configuration options for sockets, TLS/SSL, 
       cluster, and more. Typically not required.

   * - **Compressors**
     - Empty ``CompressorConfiguration``
     - {+compressors+}

   * - **ConnectTimeout**
     - 30 seconds
     - {+connect-timeout+}

   * - **Credential**
     - Empty ``MongoCredentialStore``
     - Specifies authentication credentials. Use the static factory methods on 
       ``MongoCredential`` to construct credentials.

   * - **DirectConnection**
     - ``null``
     - {+direct-connection+}

   * - **HeartbeatInterval**
     - 10 seconds
     - {+heartbeat-interval+}

   * - **HeartbeatTimeout**
     - ``ConnectTimeout`` (if specified) or 30 seconds
     - The length of time a monitoring socket can be idle before timing out.

   * - **IPv6**
     - ``false``
     - Specifies whether the host address is in IPv6 format.

   * - **IsFrozen**
     - ``false``
     - Indicates whether the settings have been frozen. Frozen settings can't be changed.

   * - **LinqProvider**
     - ``LinqProvider.V2``
     - The LINQ provider to use.

   * - **LoadBalanced**
     - ``false``
     - {+load-balanced}+

   * - **LocalThreshold**
     - 15 milliseconds
     - {+local-threshold+}

   * - **MaxConnecting**
     - ``2``
     - {+max-connecting+}

   * - **MaxConnectionIdleTime**
     - 10 minutes
     - {+max-connection-idle-time+}

   * - **MaxConnectionLifeTime**
     - 30 minutes
     - The length of time a connection can be pooled before expiring.

   * - **MaxConnectionPoolSize**
     - ``100``
     - {+max-connection-pool-size+}

   * - **MinConnectionPoolSize**
     - ``0``
     - {+min-connection-pool-size+}

   * - **ReadConcern**
     - ``ReadConcern.Default``
     - {+read-concern+}

   * - **ReadEncoding**
     - Strict encoding
     - Specifies whether UTF-8 string deserialization is strict or lenient. 
       Strict encoding will throw an exception when an invalid UTF-8 byte sequence 
       is encountered. 

   * - **ReadPreference**
     - ``ReadPreference.Primary``
     - {+read-preference+}

   * - **ReplicaSetName**
     - ``null``
     - {+replica-set-name+}

   * - **RetryReads**
     - ``true``
     - {+retry-reads+}

   * - **RetryWrites**
     - ``true``
     - {+retry-writes+}

   * - **Scheme**
     - ``ConnectionStringScheme.MongoDB``
     - Specifies whether to use the standard connection string format (``MongoDB``) 
       or the DNS seed list format (``MongoDBPlusSrv``). 

       See :manual:`the MongoDB Manual</reference/connection-string/>` for more 
       information about connection string formats. 

   * - **SdamLogFilename**
     - ``null``
     - The name of the SDAM (Server Discovery and Monitoring) log file.

       See :manual:`the MongoDB Manual</reference/monitoring/>` for more 
       information about server monitoring.

   * - **Server**
     - ``"localhost"``
     - The host where MongoDB is running.

   * - **ServerApi**
     - ``null``
     - Allows opting into Stable API versioning. 
     
       See :manual:`the MongoDB Manual</reference/stable-api>` for more information about
       Stable API versioning.

   * - **Servers**
     - ``List<MongoServerAddress>`` containing "localhost"
     - The cluster members where MongoDB is running. 

   * - **ServerSelectionTimeout**
     - 30 seconds
     - {+server-selection-timeout+}

   * - **SocketTimeout**
     - OS default
     - {+socket-timeout+}

   * - **SrvMaxHosts**
     - ``0``
     - {+srv-max-hosts+}

   * - **SslSettings**
     - ``null``
     - TLS/SSL options, including client certificates, revocation handling, and 
       enabled and disabled TLS/SSL protocols.

   * - **UseTls**
     - ``false``
     - {+use-tls+}

   * - **WaitQueueTimeout**
     - 2 minutes
     - {+wait-queue-timeout+}

   * - **WriteConcern**
     - ``WriteConcern.Acknowledged``
     - {+write-concern+}

   * - **WriteEncoding**
     - Strict encoding
     - Specifies whether UTF-8 string serialization is strict or lenient. 
       Strict encoding will throw an exception when an invalid UTF-8 byte sequence 
       is encountered. 




